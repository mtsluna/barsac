<div class="p-6 max-w-3xl mx-auto">
  <h1 class="text-2xl font-bold mb-4">Administrar Imágenes de Productos por Categoría</h1>
  <div class="mb-6">
    <label class="block mb-2 font-semibold">Selecciona una categoría:</label>
    <select class="border rounded px-3 py-2 w-full" [ngModel]="selectedCategoryId()" (ngModelChange)="onCategoryChange($event)">
      @for (category of categories(); track category.id) {
        <option [value]="category.id">{{ category.name }}</option>
      }
    </select>
  </div>

  @if (products() && products().length > 0) {
    <h2 class="text-xl font-semibold mb-2">Productos</h2>
    @for (product of products(); track product.id) {
      <div class="border rounded p-4 mb-4 flex items-center gap-4">
        <div class="flex-1">
          <div class="font-bold">{{ product.name }}</div>
          <div class="text-sm text-gray-500">ID: {{ product.id }}</div>
        </div>
        <div>
          @if (product.image) {
            <img [src]="product.image" alt="Imagen" class="w-20 h-20 object-cover rounded mb-2" />
          } @else {
            <div class="w-20 h-20 bg-gray-200 rounded mb-2 flex items-center justify-center text-xs text-gray-400">Sin imagen</div>
          }
          <input type="file" (change)="onFileSelected($event, product)" accept="image/*" />
        </div>
        <button (click)="uploadImage(product)" [disabled]="!product.selectedFile" class="ml-2 px-4 py-2 bg-blue-600 text-white rounded disabled:opacity-50">Subir Imagen</button>
      </div>
    }
  } @else if (products() && products().length === 0) {
    <div class="text-gray-500">No hay productos en esta categoría.</div>
  }
</div>
